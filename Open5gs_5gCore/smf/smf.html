

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
  <title>Session Management Function [0] &mdash; Magma India Documentation 0.1.0 documentation</title>
  

  
  <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />

  
  

  
  

  

  
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
        <script src="../../_static/jquery.js"></script>
        <script src="../../_static/underscore.js"></script>
        <script src="../../_static/doctools.js"></script>
    
    <script type="text/javascript" src="../../_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="UPF" href="../upf/index.html" />
    <link rel="prev" title="SMF" href="index.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../../index.html" class="icon icon-home"> Magma India Documentation
          

          
            
            <img src="../../_static/magma-logo.png" class="logo" alt="Logo"/>
          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../labs/index.html">Magma Virtual Labs</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../5gLab/index.html">5G Virtual Lab</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../Magma_5gCore/index.html">Magma 5G Core</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../OAI_5gCore/index.html">OAI 5G Core</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../Free5gc_5gCore/index.html">FREE5GC 5G Core</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../index.html">OPEN5GS 5G Core</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../amf/index.html">AMF</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="index.html">SMF</a><ul class="current">
<li class="toctree-l3 current"><a class="current reference internal" href="#">Session Management Function [0]</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#interface-protocols">Interface &amp; Protocols</a><ul>
<li class="toctree-l5"><a class="reference internal" href="#n4-11">N4 [11]</a></li>
<li class="toctree-l5"><a class="reference internal" href="#pfcp-24">PFCP [24]</a></li>
<li class="toctree-l5"><a class="reference internal" href="#nas-15">NAS [15]</a></li>
<li class="toctree-l5"><a class="reference internal" href="#ngap-16-18">NGAP [16] [18]</a></li>
<li class="toctree-l5"><a class="reference internal" href="#sbi-service-based-interface-25">SBI(Service-based Interface) [25]</a></li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="#call-flow">Call Flow</a><ul>
<li class="toctree-l5"><a class="reference internal" href="#session-establishment">Session Establishment</a></li>
<li class="toctree-l5"><a class="reference internal" href="#session-modification">Session Modification</a></li>
<li class="toctree-l5"><a class="reference internal" href="#session-deletion">Session Deletion</a></li>
<li class="toctree-l5"><a class="reference internal" href="#handover-procedure">Handover Procedure</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../upf/index.html">UPF</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../help.html">Help</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">Magma India Documentation</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          

















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../index.html" class="icon icon-home"></a> &raquo;</li>
        
          <li><a href="../index.html">OPEN5GS 5G Core</a> &raquo;</li>
        
          <li><a href="index.html">SMF</a> &raquo;</li>
        
      <li>Session Management Function [0]</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
          
            
              <a href="https://github.com/magmaindia/docs/blob/master/docs/Open5gs_5gCore/smf/smf.rst" class="fa fa-github"> Edit on GitHub</a>
            
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="session-management-function-0">
<h1>Session Management Function <a class="reference external" href="https://github.com/open5gs/open5gs/tree/main/src/smf">[0]</a><a class="headerlink" href="#session-management-function-0" title="Permalink to this headline">¶</a></h1>
<img alt="Alternative text" class="align-center" src="../../_images/smf-diag.jpg" />
<p>SMF is a Control Plane(CP) function that manages the session-related context with the UPF. It creates, updates, and removes sessions. It also allocates the IP addresses to each PDU session. SMF provides all the session parameters and supports the functions of UPF. SMF functions are collectively performed by MME, SGW-U, and PGW-U in the 4G System. This NF enables CUPS(Control and User Plane Separation) which decentralized the control plane and data forwarding components of the 4G System. It obtained all the rules and policies from the PCF through the N7 interface and routed them to UPF to execute them in the respective sessions.</p>
<div class="section" id="interface-protocols">
<h2>Interface &amp; Protocols<a class="headerlink" href="#interface-protocols" title="Permalink to this headline">¶</a></h2>
<div class="section" id="n4-11">
<h3>N4 <a class="reference external" href="https://github.com/open5gs/open5gs/blob/main/src/smf/n4-build.c">[11]</a><a class="headerlink" href="#n4-11" title="Permalink to this headline">¶</a></h3>
<p>Session Management context and necessary parameters are transmitted to the UPF(User Plane Function) from the SMF, once the user plane is setup.</p>
</div>
<div class="section" id="pfcp-24">
<h3>PFCP <a class="reference external" href="https://github.com/open5gs/open5gs/blob/main/src/smf/pfcp-path.c">[24]</a><a class="headerlink" href="#pfcp-24" title="Permalink to this headline">¶</a></h3>
<p>Any kind of communication between SMF and UPF is managed by the PFCP(Packet Forwarding Control Protocol). It is one of the main protocols that separates the User Plane and Control Plane.</p>
</div>
<div class="section" id="nas-15">
<h3>NAS <a class="reference external" href="https://github.com/open5gs/open5gs/blob/main/src/smf/nas-path.c">[15]</a><a class="headerlink" href="#nas-15" title="Permalink to this headline">¶</a></h3>
<p>SMF uses Non Access Stratum (NAS) signalling messages to communicate with the UE. Both the base station and AMF act as transparent routers for these messages which are relayed between the SMF and UE.</p>
</div>
<div class="section" id="ngap-16-18">
<h3>NGAP <a class="reference external" href="https://github.com/open5gs/open5gs/blob/main/src/smf/nas-path.c">[16]</a> <a class="reference external" href="https://github.com/open5gs/open5gs/blob/main/src/smf/ngap-path.c">[18]</a><a class="headerlink" href="#ngap-16-18" title="Permalink to this headline">¶</a></h3>
<p>The Next-Generation Application Protocol(NGAP) is a Control Plane(CP) protocol signaling between gNB and the AMF. It handles the UE-associated and non-UE-associated services such as handover, sending session-related context, etc.</p>
</div>
<div class="section" id="sbi-service-based-interface-25">
<h3>SBI(Service-based Interface) <a class="reference external" href="https://github.com/open5gs/open5gs/blob/main/src/smf/sbi-path.c">[25]</a><a class="headerlink" href="#sbi-service-based-interface-25" title="Permalink to this headline">¶</a></h3>
<p>Service-Based Interface is the API-based communication between network functions.</p>
</div>
</div>
<div class="section" id="call-flow">
<h2>Call Flow<a class="headerlink" href="#call-flow" title="Permalink to this headline">¶</a></h2>
<div class="section" id="session-establishment">
<h3>Session Establishment<a class="headerlink" href="#session-establishment" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>PDU session establishment starts with UE and gNB making PDU session establishment request to the AMF and then AMF selecting the best SMF, then AMF making SM context creation request to SMF.</p></li>
</ul>
<img alt="Alternative text" src="../../_images/SM-Context.jpg" />
<ul class="simple">
<li><p><a class="reference external" href="https://github.com/open5gs/open5gs/blob/main/src/smf/gsm-handler.c">[8]</a> PDU session establishment request</p></li>
<li><p><a class="reference external" href="https://github.com/open5gs/open5gs/blob/main/src/smf/nnrf-handler.c">[19]</a> NRF network function discover</p></li>
<li><p><a class="reference external" href="https://github.com/open5gs/open5gs/blob/main/src/smf/nnrf-handler.c">[19]</a> NRF search result</p></li>
<li><p><a class="reference external" href="https://github.com/open5gs/open5gs/blob/main/src/smf/sbi-path.c">[25]</a> SBI open</p></li>
<li><p><a class="reference external" href="https://github.com/open5gs/open5gs/blob/main/src/smf/init.c">[10]</a> SMF initialized</p></li>
<li><p><a class="reference external" href="https://github.com/open5gs/open5gs/blob/main/src/smf/init.c">[10]</a> Gtp context init</p></li>
<li><p><a class="reference external" href="https://github.com/open5gs/open5gs/blob/main/src/smf/init.c">[10]</a> Pfcp context init</p></li>
<li><p><a class="reference external" href="https://github.com/open5gs/open5gs/blob/main/src/smf/init.c">[10]</a> Sbi context init</p></li>
<li><p><a class="reference external" href="https://github.com/open5gs/open5gs/blob/main/src/smf/context.c">[3]</a> SMF UE add by SUPI or SMF UE pool</p></li>
<li><p><a class="reference external" href="https://github.com/open5gs/open5gs/blob/main/src/smf/nsmf-handler.c">[22]</a> NSMF create sm context request</p></li>
<li><p><a class="reference external" href="https://github.com/open5gs/open5gs/blob/main/src/smf/nsmf-handler.c">[22]</a> Sm context create data</p></li>
<li><p><a class="reference external" href="https://github.com/open5gs/open5gs/blob/main/src/smf/nsmf-handler.c">[22]</a> UE recognition and session recognition using PSI</p></li>
<li><p><a class="reference external" href="https://github.com/open5gs/open5gs/blob/main/src/smf/nsmf-handler.c">[22]</a> Checks NSSAI</p></li>
<li><p><a class="reference external" href="https://github.com/open5gs/open5gs/blob/main/src/smf/nudm-handler.c">[23]</a> Retrieve sm context: dnn config list, ssc mode list, session type, Session AMBR, qos profile</p></li>
<li><p><a class="reference external" href="https://github.com/open5gs/open5gs/blob/main/src/smf/nudm-handler.c">[23]</a> UDM send HTTP sm context created</p></li>
<li><p><a class="reference external" href="https://github.com/open5gs/open5gs/blob/main/src/smf/gsm-build.c">[7]</a> Succeeded to get pdu session</p></li>
<li><p><a class="reference external" href="https://github.com/open5gs/open5gs/blob/main/src/smf/gsm-build.c">[7]</a> Pdu session establishment reject</p></li>
</ul>
<ul class="simple">
<li><p>SMF then performs the PCF selection to create sm policy association and to get all PCC rules and other things.</p></li>
</ul>
<img alt="Alternative text" src="../../_images/PCF.jpeg" />
<ul class="simple">
<li><p><a class="reference external" href="https://github.com/open5gs/open5gs/blob/main/src/smf/npcf-handler.c">[21]</a> SM policy control create req</p></li>
<li><p><a class="reference external" href="https://github.com/open5gs/open5gs/blob/main/src/smf/npcf-handler.c">[21]</a> PCC rules</p></li>
<li><p><a class="reference external" href="https://github.com/open5gs/open5gs/blob/main/src/smf/npcf-handler.c">[21]</a> Qos id</p></li>
<li><p><a class="reference external" href="https://github.com/open5gs/open5gs/blob/main/src/smf/npcf-handler.c">[21]</a> Flow info</p></li>
<li><p><a class="reference external" href="https://github.com/open5gs/open5gs/blob/main/src/smf/npcf-handler.c">[21]</a> QOS index</p></li>
<li><p><a class="reference external" href="https://github.com/open5gs/open5gs/blob/main/src/smf/npcf-handler.c">[21]</a> Data like arp priority level, pre-emption capability</p></li>
<li><p><a class="reference external" href="https://github.com/open5gs/open5gs/blob/main/src/smf/npcf-handler.c">[21]</a> Maxbr, gbr for uplink and downlink</p></li>
<li><p><a class="reference external" href="https://github.com/open5gs/open5gs/blob/main/src/smf/npcf-handler.c">[21]</a> Npcf policy handle update notify</p></li>
<li><p><a class="reference external" href="https://github.com/open5gs/open5gs/blob/main/src/smf/npcf-handler.c">[21]</a> Npcf sm policy termination notify</p></li>
</ul>
<ul class="simple">
<li><p>Then there is PFCP session that connects the control plane to the user plane.</p></li>
</ul>
<img alt="Alternative text" src="../../_images/PFCP.jpeg" />
<ul class="simple">
<li><p><a class="reference external" href="https://github.com/open5gs/open5gs/blob/main/src/smf/context.c">[3]</a> SMF selects UPF</p></li>
<li><p><a class="reference external" href="https://github.com/open5gs/open5gs/blob/main/src/smf/n4-build.c">[11]</a> PFCP session establishment req</p></li>
<li><p><a class="reference external" href="https://github.com/open5gs/open5gs/blob/main/src/smf/n4-build.c">[11]</a> Provides PFCP node ID</p></li>
<li><p><a class="reference external" href="https://github.com/open5gs/open5gs/blob/main/src/smf/n4-build.c">[11]</a> Set SEID</p></li>
<li><p><a class="reference external" href="https://github.com/open5gs/open5gs/blob/main/src/smf/n4-build.c">[11]</a> Create and setup PDR</p></li>
<li><p><a class="reference external" href="https://github.com/open5gs/open5gs/blob/main/src/smf/n4-build.c">[11]</a> Create and setup FAR</p></li>
<li><p><a class="reference external" href="https://github.com/open5gs/open5gs/blob/main/src/smf/n4-build.c">[11]</a> Create and setup URR</p></li>
<li><p><a class="reference external" href="https://github.com/open5gs/open5gs/blob/main/src/smf/n4-build.c">[11]</a> Create and setup QER</p></li>
<li><p><a class="reference external" href="https://github.com/open5gs/open5gs/blob/main/src/smf/npcf-handler.c">[21]</a> Setup DL PDR, UL PDR, cp2up pdr and up2cp PDR</p></li>
<li><p><a class="reference external" href="https://github.com/open5gs/open5gs/blob/main/src/smf/n4-build.c">[11]</a> Mbr uplink, mbr downlink</p></li>
<li><p><a class="reference external" href="https://github.com/open5gs/open5gs/blob/main/src/smf/n4-build.c">[11]</a> Set UE ip address to the default dl pdr</p></li>
<li><p><a class="reference external" href="https://github.com/open5gs/open5gs/blob/main/src/smf/npcf-handler.c">[21]</a> Set UPF-n3 TEID</p></li>
<li><p><a class="reference external" href="https://github.com/open5gs/open5gs/blob/main/src/smf/n4-handler.c">[12]</a> PFCP session establishment response</p></li>
<li><p><a class="reference external" href="https://github.com/open5gs/open5gs/blob/main/src/smf/n4-handler.c">[12]</a> Check SEID</p></li>
<li><p><a class="reference external" href="https://github.com/open5gs/open5gs/blob/main/src/smf/n4-handler.c">[12]</a> PFCP cause request accepted else failure</p></li>
<li><p><a class="reference external" href="https://github.com/open5gs/open5gs/blob/main/src/smf/pfcp-sm.c">[24.0]</a> <a class="reference external" href="https://github.com/open5gs/open5gs/blob/main/src/smf/gsm-build.c">[7]</a> pfcp state associated</p></li>
<li><p><a class="reference external" href="https://github.com/open5gs/open5gs/blob/main/src/smf/n4-handler.c">[12]</a> SBI status from PFCP</p></li>
<li><p><a class="reference external" href="https://github.com/open5gs/open5gs/blob/main/src/smf/context.c">[3]</a> Allocate QFI</p></li>
<li><p><a class="reference external" href="https://github.com/open5gs/open5gs/blob/main/src/smf/context.c">[3]</a> PFCP pool init</p></li>
<li><p><a class="reference external" href="https://github.com/open5gs/open5gs/blob/main/src/smf/namf-build.c">[13]</a> N1N2 message transfer request data</p></li>
<li><p><a class="reference external" href="https://github.com/open5gs/open5gs/blob/main/src/smf/namf-build.c">[13]</a> N1 message container</p></li>
<li><p><a class="reference external" href="https://github.com/open5gs/open5gs/blob/main/src/smf/namf-handler.c">[14]</a> N1N2 message transfer response</p></li>
<li><p><a class="reference external" href="https://github.com/open5gs/open5gs/blob/main/src/smf/namf-handler.c">[14]</a> N1N2 message transfer failure notify</p></li>
</ul>
</div>
<div class="section" id="session-modification">
<h3>Session Modification<a class="headerlink" href="#session-modification" title="Permalink to this headline">¶</a></h3>
<img alt="Alternative text" src="../../_images/modify.jpeg" />
<ul class="simple">
<li><p><a class="reference external" href="https://github.com/open5gs/open5gs/blob/main/src/smf/gsm-build.c">[7]</a> PDU session modification command</p></li>
<li><p><a class="reference external" href="https://github.com/open5gs/open5gs/blob/main/src/smf/nsmf-handler.c">[22]</a> NSMF handle update SM context</p></li>
<li><p><a class="reference external" href="https://github.com/open5gs/open5gs/blob/main/src/smf/nsmf-handler.c">[22]</a> Update UE location and NR location</p></li>
<li><p><a class="reference external" href="https://github.com/open5gs/open5gs/blob/main/src/smf/nsmf-handler.c">[22]</a> Parse NR location (TAI and CGI)</p></li>
<li><p><a class="reference external" href="https://github.com/open5gs/open5gs/blob/main/src/smf/gsm-build.c">[7]</a> PDU session modification reject</p></li>
<li><p><a class="reference external" href="https://github.com/open5gs/open5gs/blob/main/src/smf/n4-handler.c">[12]</a> N4 handle session modification request</p></li>
<li><p><a class="reference external" href="https://github.com/open5gs/open5gs/blob/main/src/smf/n4-handler.c">[12]</a> Check PDR</p></li>
<li><p><a class="reference external" href="https://github.com/open5gs/open5gs/blob/main/src/smf/n4-handler.c">[12]</a> Check TEID</p></li>
<li><p><a class="reference external" href="https://github.com/open5gs/open5gs/blob/main/src/smf/n4-handler.c">[12]</a> Check PFCP Node and Interface access</p></li>
<li><p><a class="reference external" href="https://github.com/open5gs/open5gs/blob/main/src/smf/n4-handler.c">[12]</a> <a class="reference external" href="https://github.com/open5gs/open5gs/blob/main/src/smf/nsmf-handler.c">[22]</a> PFCP modify command</p></li>
<li><p><a class="reference external" href="https://github.com/open5gs/open5gs/blob/main/src/smf/n4-handler.c">[12]</a> PFCP send QOS flow list modify</p></li>
<li><p><a class="reference external" href="https://github.com/open5gs/open5gs/blob/main/src/smf/n4-build.c">[11]</a> <a class="reference external" href="https://github.com/open5gs/open5gs/blob/main/src/smf/n4-handler.c">[12]</a> PDR modification</p></li>
<li><p><a class="reference external" href="https://github.com/open5gs/open5gs/blob/main/src/smf/n4-build.c">[11]</a> <a class="reference external" href="https://github.com/open5gs/open5gs/blob/main/src/smf/n4-handler.c">[12]</a> QOS flow modification</p></li>
<li><p><a class="reference external" href="https://github.com/open5gs/open5gs/blob/main/src/smf/n4-build.c">[11]</a> <a class="reference external" href="https://github.com/open5gs/open5gs/blob/main/src/smf/n4-handler.c">[12]</a> FAR modification</p></li>
<li><p><a class="reference external" href="https://github.com/open5gs/open5gs/blob/main/src/smf/nsmf-handler.c">[22]</a> SMF send SM context updated data N1 N2 message</p></li>
<li><p><a class="reference external" href="https://github.com/open5gs/open5gs/blob/main/src/smf/namf-handler.c">[14]</a> Update SM context response to AMF</p></li>
<li><p><a class="reference external" href="https://github.com/open5gs/open5gs/blob/main/src/smf/npcf-handler.c">[21]</a> SM policy modification request</p></li>
<li><p><a class="reference external" href="https://github.com/open5gs/open5gs/blob/main/src/smf/npcf-handler.c">[21]</a> Update authorised PCC rules</p></li>
<li><p><a class="reference external" href="https://github.com/open5gs/open5gs/blob/main/src/smf/npcf-handler.c">[21]</a> Update QOS info</p></li>
<li><p><a class="reference external" href="https://github.com/open5gs/open5gs/blob/main/src/smf/npcf-handler.c">[21]</a> Response sent</p></li>
</ul>
</div>
<div class="section" id="session-deletion">
<h3>Session Deletion<a class="headerlink" href="#session-deletion" title="Permalink to this headline">¶</a></h3>
<img alt="Alternative text" src="../../_images/Deletion.jpeg" />
<ul class="simple">
<li><p><a class="reference external" href="https://github.com/open5gs/open5gs/blob/main/src/smf/gsm-build.c">[7]</a> PDU session release command</p></li>
<li><p><a class="reference external" href="https://github.com/open5gs/open5gs/blob/main/src/smf/nsmf-handler.c">[22]</a> Nsmf handle release sm context</p></li>
<li><p><a class="reference external" href="https://github.com/open5gs/open5gs/blob/main/src/smf/n4-build.c">[11]</a> N4 session deletion Request</p></li>
<li><p><a class="reference external" href="https://github.com/open5gs/open5gs/blob/main/src/smf/pfcp-path.c">[24]</a> Smf pfcp send session deletion request: Delete SM context</p></li>
<li><p><a class="reference external" href="https://github.com/open5gs/open5gs/blob/main/src/smf/n4-build.c">[11]</a> Remove PDR</p></li>
<li><p><a class="reference external" href="https://github.com/open5gs/open5gs/blob/main/src/smf/n4-build.c">[11]</a> Remove FAR</p></li>
<li><p><a class="reference external" href="https://github.com/open5gs/open5gs/blob/main/src/smf/n4-build.c">[11]</a> Remove QER</p></li>
<li><p><a class="reference external" href="https://github.com/open5gs/open5gs/blob/main/src/smf/npcf-build.c">[20]</a> SM policy control deletion</p></li>
<li><p><a class="reference external" href="https://github.com/open5gs/open5gs/blob/main/src/smf/npcf-build.c">[20]</a> SM policy delete data</p></li>
</ul>
</div>
<div class="section" id="handover-procedure">
<h3>Handover Procedure<a class="headerlink" href="#handover-procedure" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>The SMF supports the Xn-based and N2-based handover procedures to hand over a UE from a source NG-RAN node to a target NG-RAN node using the Xn or N2 reference points. Initiation of this procedure can be due to new radio conditions, load balancing or due to a specific service.</p></li>
<li><p>The SMF releases the QoS flows that failed to set up on the target NG-RAN during Xn and N2 handovers on the respective interfaces N4 (UPF) and N1 (UE). The SMF sends appropriate notification to N7 (PCF) based on the triggers if armed. The SMF also sends the usage report to N40 (CHF) for the released QoS flows.</p></li>
</ul>
<img alt="Alternative text" src="../../_images/Handover.jpeg" />
<ul class="simple">
<li><p><a class="reference external" href="https://github.com/open5gs/open5gs/blob/main/src/smf/ngap-handler.c">[17]</a> Handle handover required transfer</p></li>
<li><p><a class="reference external" href="https://github.com/open5gs/open5gs/blob/main/src/smf/ngap-handler.c">[17]</a> Handle resource setup transfer request</p></li>
<li><p><a class="reference external" href="https://github.com/open5gs/open5gs/blob/main/src/smf/ngap-handler.c">[17]</a> Resource setup unsuccessful transfer</p></li>
<li><p><a class="reference external" href="https://github.com/open5gs/open5gs/blob/main/src/smf/ngap-handler.c">[17]</a> Provides GTP tunnel</p></li>
<li><p><a class="reference external" href="https://github.com/open5gs/open5gs/blob/main/src/smf/ngap-handler.c">[17]</a> GTP- TEID</p></li>
<li><p><a class="reference external" href="https://github.com/open5gs/open5gs/blob/main/src/smf/ngap-handler.c">[17]</a> Setup FAR</p></li>
<li><p><a class="reference external" href="https://github.com/open5gs/open5gs/blob/main/src/smf/ngap-handler.c">[17]</a> Handle path switch request transfer</p></li>
<li><p><a class="reference external" href="https://github.com/open5gs/open5gs/blob/main/src/smf/ngap-handler.c">[17]</a> Path switch transfer successful</p></li>
<li><p><a class="reference external" href="https://github.com/open5gs/open5gs/blob/main/src/smf/ngap-handler.c">[17]</a> Path switch transfer Failed</p></li>
</ul>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
        <a href="../upf/index.html" class="btn btn-neutral float-right" title="UPF" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
        <a href="index.html" class="btn btn-neutral float-left" title="SMF" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>
        &#169; Copyright 2022, Magma India.

    </p>
  </div>
    
    
    
    Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>
        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>