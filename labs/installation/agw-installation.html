

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
  <title>Installation of Access Gateway &mdash; Magma India Documentation 0.1.0 documentation</title>
  

  
  <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />

  
  

  
  

  

  
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
        <script src="../../_static/jquery.js"></script>
        <script src="../../_static/underscore.js"></script>
        <script src="../../_static/doctools.js"></script>
    
    <script type="text/javascript" src="../../_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Installation of srsRAN" href="srsRAN-installation.html" />
    <link rel="prev" title="Installation of Orchestrator with one IP instead of five" href="orc8r-installation.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../../index.html" class="icon icon-home"> Magma India Documentation
          

          
            
            <img src="../../_static/magma-logo.png" class="logo" alt="Logo"/>
          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="../index.html">Magma Virtual Labs</a><ul class="current">
<li class="toctree-l2 current"><a class="reference internal" href="index.html">Installation</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="orc8r-installation.html">Installation of Orchestrator with one IP instead of five</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">Installation of Access Gateway</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#install-access-gateway-on-ubuntu-bare-metal">Install Access Gateway on Ubuntu (Bare Metal)</a></li>
<li class="toctree-l4"><a class="reference internal" href="#prerequisites">Prerequisites</a></li>
<li class="toctree-l4"><a class="reference internal" href="#deployment">Deployment</a><ul>
<li class="toctree-l5"><a class="reference internal" href="#create-boot-usb-stick-and-install-ubuntu-on-your-agw-host">1. Create boot USB stick and install Ubuntu on your AGW host</a></li>
<li class="toctree-l5"><a class="reference internal" href="#deploy-magma-on-the-agw-host">2. Deploy magma on the AGW_HOST</a><ul>
<li class="toctree-l6"><a class="reference internal" href="#run-agw-installation">Run AGW installation</a></li>
<li class="toctree-l6"><a class="reference internal" href="#post-install-check">Post Install Check</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="srsRAN-installation.html">Installation of srsRAN</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../architecture/index.html">Architecture</a></li>
<li class="toctree-l2"><a class="reference internal" href="../services/index.html">Magma Services</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../5gLab/index.html">5G Virtual Lab</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../Magma_5gCore/index.html">Magma 5G Core</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../OAI_5gCore/index.html">OAI 5G Core</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../Free5gc_5gCore/index.html">FREE5GC 5G Core</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../Open5gs_5gCore/index.html">OPEN5GS 5G Core</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../help.html">Help</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">Magma India Documentation</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          

















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../index.html" class="icon icon-home"></a> &raquo;</li>
        
          <li><a href="../index.html">Magma Virtual Labs</a> &raquo;</li>
        
          <li><a href="index.html">Installation</a> &raquo;</li>
        
      <li>Installation of Access Gateway</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
          
            
              <a href="https://github.com/magmaindia/docs/blob/master/docs/labs/installation/agw-installation.rst" class="fa fa-github"> Edit on GitHub</a>
            
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="installation-of-access-gateway">
<h1>Installation of Access Gateway<a class="headerlink" href="#installation-of-access-gateway" title="Permalink to this headline">¶</a></h1>
<div class="section" id="install-access-gateway-on-ubuntu-bare-metal">
<h2>Install Access Gateway on Ubuntu (Bare Metal)<a class="headerlink" href="#install-access-gateway-on-ubuntu-bare-metal" title="Permalink to this headline">¶</a></h2>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Debian-based AGW deployments are no longer supported as of v1.6. If you want to install to Debian, refer to v1.5 of the documentation.</p>
</div>
</div>
<div class="section" id="prerequisites">
<h2>Prerequisites<a class="headerlink" href="#prerequisites" title="Permalink to this headline">¶</a></h2>
<p>To set up a Magma Access Gateway, you will need a machine that satisfies the following requirements:
AGW_HOST: 64bit-X86 machine, bare metal strongly recommended (not virtualized). You will need two ethernet ports. We use enp1s0 and enp2s0 in this guide. They might have different names on your hardware so just replace enp1s0 and enp2s0 with your current interfaces name in this guideline. One port is for the SGi interface (default: enp1s0) and one for the S1 interface (default: enp2s0). Note that the agw_install_ubuntu.sh script will rename the enp1s0 interface to eth0.</p>
</div>
<div class="section" id="deployment">
<h2>Deployment<a class="headerlink" href="#deployment" title="Permalink to this headline">¶</a></h2>
<div class="section" id="create-boot-usb-stick-and-install-ubuntu-on-your-agw-host">
<h3>1. Create boot USB stick and install Ubuntu on your AGW host<a class="headerlink" href="#create-boot-usb-stick-and-install-ubuntu-on-your-agw-host" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>Download the Ubuntu Server 20.04 LTS .iso image from the Ubuntu website</p></li>
<li><p>Create bootable usb using etcher <a class="reference external" href="https://ubuntu.com/tutorials/create-a-usb-stick-on-macos">tutorial here</a></p></li>
<li><p>Boot your AGW host from USB (Press F11 to select boot sequence, :warning: This might be different for your machine). If you see 2 options to boot from USB, select the non-UEFI option.</p></li>
<li><p>Install and configure you access gateway according to your network defaults.</p></li>
<li><p>Make sure to enable ssh server and utilities (untick every other)</p></li>
<li><p>Connect your SGi interface to the internet and select this port during the installation process to get an IP using DHCP.</p></li>
</ul>
</div>
<div class="section" id="deploy-magma-on-the-agw-host">
<h3>2. Deploy magma on the AGW_HOST<a class="headerlink" href="#deploy-magma-on-the-agw-host" title="Permalink to this headline">¶</a></h3>
<div class="section" id="run-agw-installation">
<h4>Run AGW installation<a class="headerlink" href="#run-agw-installation" title="Permalink to this headline">¶</a></h4>
<p>To install on server with DHCP configured SGi interface.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>sudo su
wget https://raw.githubusercontent.com/magma/magma/v1.6/lte/gateway/deploy/agw_install_ubuntu.sh
bash agw_install_ubuntu.sh
</pre></div>
</div>
<p>To Install on server with statically allocated SGi interface. Fow example: SGi has 1.1.1.1/24 IP and upstream router IP is 1.1.1.200</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>sudo su
wget https://raw.githubusercontent.com/magma/magma/v1.6/lte/gateway/deploy/agw_install_ubuntu.sh
bash agw_install_ubuntu.sh <span class="m">1</span>.1.1.1/24 <span class="m">1</span>.1.1.200
</pre></div>
</div>
<p>The script will run a pre-check script that will prompt you what will change on your machine. If you’re okay with those changes reply <code class="docutils literal notranslate"><span class="pre">yes</span></code> and magma will be installed. If <code class="docutils literal notranslate"><span class="pre">no</span></code> is replied It will stop the installation.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>- Check if Ubuntu is installed
Ubuntu is installed
- Check for magma user
magma user is not Installed
- Check if both interfaces are named eth0 and eth1
Interfaces will be renamed to eth0 and eth1
eth0 will be set to dhcp and eth1 10.0.2.1
Do you accept those modifications and want to proceed with magma installation?(y/n)
Please answer yes or no.
</pre></div>
</div>
<p>The machine will reboot but It’s not finished yet, the script is still running in the background. You can follow the output there</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>sudo journalctl -fu agw_installation
</pre></div>
</div>
<p>When you see “AGW installation is done.” It means that your AGW installation is done, you can make sure magma is running by executing:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>sudo service magma@* status
</pre></div>
</div>
</div>
<div class="section" id="post-install-check">
<h4>Post Install Check<a class="headerlink" href="#post-install-check" title="Permalink to this headline">¶</a></h4>
<p>Make sure you have <code class="docutils literal notranslate"><span class="pre">control_proxy.yml</span></code> file in directory /var/opt/magma/configs/ before running post install script.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>bash /root/agw_post_install_ubuntu.sh
</pre></div>
</div>
</div>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
        <a href="srsRAN-installation.html" class="btn btn-neutral float-right" title="Installation of srsRAN" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
        <a href="orc8r-installation.html" class="btn btn-neutral float-left" title="Installation of Orchestrator with one IP instead of five" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>
        &#169; Copyright 2022, Magma India.

    </p>
  </div>
    
    
    
    Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>
        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>